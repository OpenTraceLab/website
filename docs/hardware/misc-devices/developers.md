# Developers

This page contains documentation and resources for aspiring OpenTraceLab developers. 
## Contents 
\- [1 Source code browser](Developers.html#Source_code_browser) \- [2 Tutorials and API descriptions](Developers.html#Tutorials_and_API_descriptions) \- [3 Development guidelines](Developers.html#Development_guidelines) \- [4 Design pages](Developers.html#Design_pages) \- [5 Debugging (runtime messages)](Developers.html#Debugging_(runtime_messages)) \- [6 Debugging (debug symbols)](Developers.html#Debugging_(debug_symbols)) \- [7 Temporarily build OpenTraceView with clang](Developers.html#Temporarily_build_OpenTraceView_with_clang) \- [8 GDB Backtraces for OpenTraceView](Developers.html#GDB_Backtraces_for_PulseView) \- [9 Catching Unhandled OpenTraceView Exceptions with GDB](Developers.html#Catching_Unhandled_OpenTraceView_Exceptions_with_GDB) \- [10 Valgrind](Developers.html#Valgrind) \- [11 Release process](Developers.html#Release_process) \- [12 Miscellaneous](Developers.html#Miscellaneous) 
## Source code browser \- [gitweb](http://github.com/OpenTraceLab/) ## Tutorials and API descriptions \- [OpenTraceCapture API](http://OpenTraceLab.org/api/OpenTraceCapture/unstable/index.html) \- [OpenTraceDecode API](http://OpenTraceLab.org/api/OpenTraceDecode/unstable/index.html) \- [Protocol decoder HOWTO](Protocol_decoder_HOWTO.html "Protocol decoder HOWTO") \- [Protocol decoder API](Protocol_decoder_API.html "Protocol decoder API") \- [Formats and structures](Formats_and_structures.html "Formats and structures") \- [Hardware driver API](Hardware_driver_API.html "Hardware driver API") \- [Portability](Portability.html "Portability") ## Development guidelines Please check the respective sub-project's HACKING file for coding guidelines and development tips. \- [OpenTraceCapture](http://github.com/OpenTraceLab/?p=OpenTraceCapture.git;a=blob;f=HACKING;hb=HEAD) \- [OpenTraceDecode](http://github.com/OpenTraceLab/?p=OpenTraceDecode.git;a=blob;f=HACKING;hb=HEAD) \- [OpenTraceCLI](http://github.com/OpenTraceLab/?p=OpenTraceCLI.git;a=blob;f=HACKING;hb=HEAD) \- [OpenTraceView](http://github.com/OpenTraceLab/?p=OpenTraceView.git;a=blob;f=HACKING;hb=HEAD) \- [OpenTraceLab-firmware-fx2lafw](http://github.com/OpenTraceLab/?p=OpenTraceLab-firmware-fx2lafw.git;a=blob;f=HACKING;hb=HEAD) ## Design pages This is a list of pages we use while working through new features or designs. They are working documents, not official API or feature documentation. \- ~~[New trigger specification](New_trigger_specification.html "New trigger specification")~~ \- ~~[High precision analog](High_precision_analog.html "High precision analog")~~ \- ~~[Probe Groupsâ€Ž](Probe_Groups.html "Probe Groups")~~ \- [Improved Configuration Enumeration](Improved_Configuration_Enumeration.html "Improved Configuration Enumeration") \- ~~[Input/output API revamp](Input/output_API_revamp.html "Input/output API revamp")~~ \- [File format:OpenTraceLab/v3](./File_format:OpenTraceLab/v3.html "File format:OpenTraceLab/v3") \- [Domain-specific measurements and analysis](Domain-specific_measurements_and_analysis.html "Domain-specific measurements and analysis") \- [Feeding hardware-decoded packets into OpenTraceCapture](Feeding_hardware-decoded_packets_into_OpenTraceCapture.html "Feeding hardware-decoded packets into OpenTraceCapture") \- [Sending data sequences to devices](Sending_data_sequences_to_devices.html "Sending data sequences to devices") ## Debugging (runtime messages) If you would like to see the output of the sr_dbg() or sr_err() functions you can use one of the following [OpenTraceCLI](OpenTraceCLI.html "OpenTraceCLI") options:  $ export OpenTraceLab_DEBUG=1  or  $ OpenTraceCLI -l 5  The **5** above is the log level. The following levels are available: \- 0: no output at all \- 1: error messages \- 2: warnings (the default) \- 3: informational messages \- 4: debug \- 5: spew ## Debugging (debug symbols) If you want to enable debug information in compiler output, to receive fault information with symbolic information, or run the software under a debugger's control, setup e.g. **CFLAGS=-g** before running **./configure** or adjust the **CMAKE_BUILD_TYPE** to Debug or RelWithDebInfo.  $ ./configure --prefix=$HOME/sr CFLAGS="-g -O0" $ cmake -DCMAKE_BUILD_TYPE=Debug .  See the **valgrind** section below for more detailled examples. ## Temporarily build OpenTraceView with clang $ cmake -DCMAKE_C_COMPILER=clang -DCMAKE_CXX_COMPILER=clang++ . ## GDB Backtraces for OpenTraceView [OpenTraceView](OpenTraceView.html "OpenTraceView") can be a bit tricky to debug as running it in GDB can stall the entire X11 session when OpenTraceView crashes. This can be worked around, however. One approach is running GDB with a script that automatically creates a backtrace and terminates GDB (and thus, OpenTraceView):  $ gdb --command=auto_bt.gdb build/bin/OpenTraceView  with auto_bt.gdb containing lines as these:  set pagination off run -l 5 thread apply all bt quit  Another approach is to run gdb in tmux. When X11 freezes you can switch to a different virtual console, reattach to tmux, and continue the debugging process from there. This approach also makes it easier to use breakpoints. ## Catching Unhandled OpenTraceView Exceptions with GDB By default, Qt catches and handles all unhandled C++ exceptions - see Application::notify() in [application.cpp](https://github.com/OpenTraceLab/?p=OpenTraceView.git;a=blob;f=pv/application.cpp). We don't want that when debugging unhandled exceptions, so the "exit(1)" must be replaced by "throw e". Then, you can use GDB to catch the exception:  $ gdb --command=catch_exception.gdb build/bin/OpenTraceView  with catch_exception.gdb containing lines as these:  set pagination off define custom_action break __cxa_throw catch throw bt end run -l 5 thread apply all custom_action quit  ## Valgrind The following instructions outline how you can use [valgrind](http://valgrind.org/) to help find memory-related bugs in the OpenTraceLab libraries and frontends. **Debug packages setup (optional):** In order to get more useful output from valgrind you can (optionally) install various **-dbg** packages (if your distro provides them). Example for [OpenTraceCapture](OpenTraceCapture.html "OpenTraceCapture") / [OpenTraceDecode](OpenTraceDecode.html "OpenTraceDecode") / [OpenTraceCLI](OpenTraceCLI.html "OpenTraceCLI") on Debian:  $ apt-get install libgcc1-dbg libpcre3-dbg libglib2.0-0-dbg libftdi1-dbg zlib1g-dbg libasound2-dbg python3-dbg valgrind-dbg  For Qt and/or Boost based frontends (e.g. [OpenTraceView](OpenTraceView.html "OpenTraceView")) additional packages might be helpful in some cases:  $ apt-get install libboost1.50-dbg libqt4-dbg libstdc++6-4.7-dbg libaudiofile-dbg \ libsm6-dbg libice6-dbg libxt6-dbg libicu48-dbg libjpeg62-dbg  **Building:** Here's a short overview of how to build the OpenTraceLab subprojects for use with valgrind. Basically everything should be built with **-g O0** (enable debug output, and disable compiler optimizations). In this example, everything is installed into a custom install directory (\$HOME/sr) in order to have a clean and consistent environment.  $ cd OpenTraceCapture; CFLAGS="-g -O0" ./configure --prefix=$HOME/sr && make install $ cd OpenTraceDecode; CFLAGS="-g -O0" ./configure --prefix=$HOME/sr && make install $ cd OpenTraceCLI; CFLAGS="-g -O0" PKG_CONFIG_PATH=$HOME/sr/lib/pkgconfig ./configure --prefix=$HOME/sr && make install $ cd OpenTraceView; CXXFLAGS="-g -O0" PKG_CONFIG_PATH=$HOME/sr/lib/pkgconfig cmake . -DCMAKE_INSTALL_PREFIX:string=$HOME/sr && make install  **Usage:** You can now run valgrind with your preferred options against the tools/libs in \$HOME/sr. Note that **G_SLICE=always-malloc G_DEBUG=gc-friendly** should be used to get valgrind-friendly glib behaviour. Different command-line options, attached hardware and so on, will test different code paths in the libs/tools (e.g. [OpenTraceCLI](OpenTraceCLI.html "OpenTraceCLI")), of course.  $ LD_LIBRARY_PATH=$HOME/sr/lib G_SLICE=always-malloc G_DEBUG=gc-friendly valgrind -v --tool=memcheck --leak-check=full \ \--num-callers=40 --track-origins=yes --leak-resolution=high --track-fds=yes --fullpath-after=. \ \--read-var-info=yes ~/sr/bin/OpenTraceCLI --help  ## Release process See [Release process](Developers/Release_process.html "Developers/Release process"). ## Miscellaneous \- [Current events](Current_events.html "Current events") \- [Public relations](Public_relations.html "Public relations") \- [News](News.html "News") (obsoleted by [the blog](http://www.OpenTraceLab.org/blog)) 
Retrieved from "[https://OpenTraceLab.org/w/index.php?title=Developers&oldid=15597](https://OpenTraceLab.org/w/index.php?title=Developers&oldid=15597)" 
[Category](specialcategories-specialcategories.md): \- [APIs](https://OpenTraceLab.org/w/index.php?title=Category:APIs&action=edit&redlink=1 "Category:APIs \(page does not exist\)")

## See Also
- [Supported Hardware Overview](../supported-hardware.md)
- [OpenTraceCapture Documentation](../../opentracecapture/overview.md)
