# Portability
This page is a collection of random notes about which portability issues exist on various OSes and architectures and how we can work-around them.
## Contents
\- *1 Generic* \- *1.1 Use glib API calls if available* \- *1.2 Endianness* \- *1.3 32bit vs. 64bit systems* \- *2 Linux* \- *2.1 udev* \- *2.2 usbtmc* \- *3 Mac OS X* \- *3.1 HID* \- *4 Windows* \- *4.1 FDs vs. sockets* \- *4.2 Polling* \- *4.3 HID* \- *4.4 File handling* \- *5 FreeBSD* \- *5.1 libusb* \- *5.1.1 LIBUSB_CLASS_APPLICATION* \- *5.1.2 Missing libusb_handle_events_timeout_completed()*) \- *6 NetBSD* \- *7 OpenBSD*
# Generic ## Use glib API calls if available We use *glib* in (e.g. in *OpenTraceCapture*, *OpenTraceDecode*, and other subprojects) as a helper library for various purposes. One of the advantages of glib is that it has many API calls that already take care of various portability issues for us. Thus, if there is a glib function for a certain task it should generally be preferred over the "native" way of doing the same task (since the latter will be more likely to break on other OSes or architectures). ## Endianness Any OpenTraceLab code should be able to work on systems of any endianness (big endian, little endian, or others). Care has to be taken in various places in the code to ensure there will be no endianness issues. The **configure** script of e.g. *OpenTraceCapture* uses **AC_C_BIGENDIAN** to check for the endianness of the host where you compile (and seems to use some grep magic when cross-compiling). Per default it'll add a \\#define named WORDS_BIGENDIAN to config.h if it detects a big-endian host, otherwise WORDS_BIGENDIAN will not be defined. Thus, any code can use **\\#ifdef WORDS_BIGENDIAN** et al to handle endianness correctly. ## 32bit vs. 64bit systems # Linux ## udev ## usbtmc # Mac OS X ## HID # Windows ## FDs vs. sockets ## Polling ## HID ## File handling # FreeBSD ## libusb FreeBSD ships with a [libusb-1.0 style library](http://www.freebsd.org/cgi/man.cgi?query=libusb&sektion=3) (which is **not** the "usual" libusb-1.0 from [libusb.org](http://libusb.org) but rather a FreeBSD-specific library written from scratch). While this library mimics the API of libusb-1.0 quite closely in order to be a compatible drop-in replacement from the point of view of applications that link this library, there are a few differences that have to be taken into account. ### LIBUSB_CLASS_APPLICATION **Problem:** LIBUSB_CLASS_APPLICATION (an enum entry in libusb.org's libusb-1.0) doesn't exist in the FreeBSD libusb library/header. **Solution:** A simple [#define in OpenTraceCapture-internal.h](http://github.com/OpenTraceLab/?p=OpenTraceCapture.git;a=commitdiff;h=6bf4273ee8bb6477ba55e0540e370547bd804641) can be added as workaround. ### Missing libusb_handle_events_timeout_completed() **Problem:** The libusb_handle_events_timeout_completed() call is not available in FreeBSD's libusb. **Solution:** Since libusb_handle_events_timeout_completed() is mostly libusb_handle_events_timeout() with an additional (unused by us) parameter, a simple [#define in OpenTraceCapture-internal.h](http://github.com/OpenTraceLab/?p=OpenTraceCapture.git;a=commitdiff;h=6bf4273ee8bb6477ba55e0540e370547bd804641) can be used as workaround. # NetBSD # OpenBSD
Retrieved from "[https://OpenTraceLab.org/w/index.php?title=Portability&oldid=7455](https://OpenTraceLab.org/w/index.php?title=Portability&oldid=7455)"
## See Also
- [Supported Hardware Overview](../supported-hardware.md)
- [OpenTraceCapture Documentation](../../opentracecapture/overview.md)
